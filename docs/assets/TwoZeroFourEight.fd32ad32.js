var S=(o,e,i)=>{if(!e.has(o))throw TypeError("Cannot "+i)};var s=(o,e,i)=>(S(o,e,"read from private field"),i?i.call(o):e.get(o)),v=(o,e,i)=>{if(e.has(o))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(o):e.set(o,i)},n=(o,e,i,r)=>(S(o,e,"write to private field"),r?r.call(o,i):e.set(o,i),i);import{_ as O,d as B,r as w,a as D,b as C,o as y,c as k,e as h,w as A,v as F,F as N,f as M,p as z,g as T,n as I,t as L,h as U}from"./index.57a5101f.js";var _,u,a,p;class V{constructor(e=4,i=4){v(this,_,void 0);v(this,u,void 0);v(this,a,void 0);v(this,p,2);n(this,a,new Array(i).fill(0).map(r=>new Array(e).fill(0))),n(this,_,e),n(this,u,i),this.auto_appear(),this.auto_appear()}get max(){return s(this,p)}reset(e,i){e&&n(this,_,e),i&&n(this,u,i),n(this,a,new Array(s(this,u)).fill(0).map(r=>new Array(s(this,_)).fill(0))),this.auto_appear(),this.auto_appear()}auto_appear(e=2){const i=[];for(let t=0;t<s(this,u);t++)for(let c=0;c<s(this,_);c++)s(this,a)[t][c]===0?i.push([c,t]):n(this,p,Math.max(s(this,p),s(this,a)[t][c]));if(i.length===0)return[-1,-1];const r=i[Math.floor(Math.random()*i.length)];return this.set_val(...r,e),r}apply_force_up(){for(let e=0;e<s(this,_);e++){let i=0;for(let r=i+1;r<s(this,u);r++)if(s(this,a)[r][e]!==0)for(let t=r;t>i;t--)if(s(this,a)[t-1][e]===0)s(this,a)[t-1][e]=s(this,a)[t][e],s(this,a)[t][e]=0;else if(s(this,a)[t-1][e]===s(this,a)[t][e]){s(this,a)[t-1][e]*=2,s(this,a)[t][e]=0,i=t;break}else{i=t;break}}}apply_force_right(){for(let e=0;e<s(this,u);e++){let i=s(this,_)-1;for(let r=i-1;r>=0;r--)if(s(this,a)[e][r]!==0)for(let t=r;t<i;t++)if(s(this,a)[e][t+1]===0)s(this,a)[e][t+1]=s(this,a)[e][t],s(this,a)[e][t]=0;else if(s(this,a)[e][t+1]===s(this,a)[e][t]){s(this,a)[e][t+1]*=2,s(this,a)[e][t]=0,i=t;break}else{i=t;break}}}apply_force_down(){for(let e=0;e<s(this,_);e++){let i=s(this,u)-1;for(let r=i-1;r>=0;r--)if(s(this,a)[r][e]!==0)for(let t=r;t<i;t++)if(s(this,a)[t+1][e]===0)s(this,a)[t+1][e]=s(this,a)[t][e],s(this,a)[t][e]=0;else if(s(this,a)[t+1][e]===s(this,a)[t][e]){s(this,a)[t+1][e]*=2,s(this,a)[t][e]=0,i=t;break}else{i=t;break}}}apply_force_left(){for(let e=0;e<s(this,u);e++){let i=0;for(let r=i+1;r<s(this,_);r++)if(s(this,a)[e][r]!==0)for(let t=r;t>i;t--)if(s(this,a)[e][t-1]===0)s(this,a)[e][t-1]=s(this,a)[e][t],s(this,a)[e][t]=0;else if(s(this,a)[e][t-1]===s(this,a)[e][t]){s(this,a)[e][t-1]*=2,s(this,a)[e][t]=0,i=t;break}else{i=t;break}}}apply_force(e){switch(e){case"up":this.apply_force_up();break;case"right":this.apply_force_right();break;case"down":this.apply_force_down();break;case"left":this.apply_force_left();break}return this.check_if_end()?!0:(this.auto_appear(Math.random()<.5?2:4),!1)}check_if_end(){const e=JSON.stringify(s(this,a));this.apply_force_up();let i=JSON.stringify(s(this,a));return n(this,a,JSON.parse(e)),i!==e||(this.apply_force_right(),i=JSON.stringify(s(this,a)),n(this,a,JSON.parse(e)),i!==e)||(this.apply_force_down(),i=JSON.stringify(s(this,a)),n(this,a,JSON.parse(e)),i!==e)?!1:(this.apply_force_left(),i=JSON.stringify(s(this,a)),n(this,a,JSON.parse(e)),i===e)}have_a_look(){return s(this,a).map(e=>[...e])}set_val(e,i,r=2){s(this,a)[i][e]=r}}_=new WeakMap,u=new WeakMap,a=new WeakMap,p=new WeakMap;const b=o=>(z("data-v-374724b2"),o=o(),T(),o),Z={class:"two-zero-four-eight"},R={class:"banner-area"},$={class:"ipt"},j=b(()=>h("span",null,"\u957F\u5EA6",-1)),q={class:"ipt"},G=b(()=>h("span",null,"\u9AD8\u5EA6",-1)),H=b(()=>h("i",{class:"iconfont icon-start"},null,-1)),K=U(" \u91CD\u65B0\u5F00\u59CB "),P=[H,K],Q={class:"game-area"},W={class:"grid-container"},X=B({setup(o){const e=new V,i=w(e.have_a_look()),r=w(4),t=w(4),c=()=>{r.value>10?r.value=10:r.value<4?r.value=4:r.value=Math.floor(r.value),t.value>10?t.value=10:t.value<4?t.value=4:t.value=Math.floor(t.value),e.reset(r.value,t.value),i.value=e.have_a_look()},E=g=>{const l=["#f9ae61","#a6d5fa","#5e8f32"],f=["33","66","99","cc","ee"],d=Math.log2(g);return d>=15?"#ffd700":l[d%3]+f[Math.floor(d/3)]},x=g=>{let l;switch(g.key){case"ArrowUp":l=e.apply_force("up"),i.value=e.have_a_look();break;case"ArrowRight":l=e.apply_force("right"),i.value=e.have_a_look();break;case"ArrowDown":l=e.apply_force("down"),i.value=e.have_a_look();break;case"ArrowLeft":l=e.apply_force("left"),i.value=e.have_a_look();break}l&&alert("\u7ED3\u675F\uFF01")};return D(()=>{document.addEventListener("keyup",x)}),C(()=>{document.addEventListener("keyup",x)}),(g,l)=>(y(),k("div",Z,[h("div",R,[h("div",$,[j,A(h("input",{type:"number","onUpdate:modelValue":l[0]||(l[0]=f=>r.value=f),placeholder:"\u8303\u56F4: 4 - 10"},null,512),[[F,r.value]])]),h("div",q,[G,A(h("input",{type:"number","onUpdate:modelValue":l[1]||(l[1]=f=>t.value=f),placeholder:"\u8303\u56F4: 4 - 10"},null,512),[[F,t.value]])]),h("div",{class:"btn",title:"\u91CD\u65B0\u5F00\u59CB",onClick:c},P)]),h("div",Q,[h("div",W,[(y(!0),k(N,null,M(i.value,(f,d)=>(y(),k("div",{class:"row",key:"row-"+d},[(y(!0),k(N,null,M(f,(m,J)=>(y(),k("div",{class:"column",style:I(`background-color: ${E(m)}`),key:"col-"+J},L(m===0?"\xA0":m),5))),128))]))),128))])])]))}});var te=O(X,[["__scopeId","data-v-374724b2"]]);export{te as default};
