var D=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var s=(n,e,t)=>(D(n,e,"read from private field"),t?t.call(n):e.get(n)),m=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},d=(n,e,t,a)=>(D(n,e,"write to private field"),a?a.call(n,t):e.set(n,t),t);import{_ as V,d as z,r as C,o as h,c,e as E,F as B,f as S,g as $,h as j,i as N,t as k,j as g,n as I}from"./index.99a289c7.js";var f,_,i,o;class L{constructor(e=9,t=9,a){m(this,f,0);m(this,_,0);m(this,i,[]);m(this,o,0);this.init_ground(e,t,a),this.init_mine()}get mine(){return s(this,o)}init_ground(e=10,t=10,a){e<9?e=9:e>30&&(e=30),t<9?t=9:t>30&&(t=30),d(this,f,e),d(this,_,t),d(this,i,new Array(t).fill(0).map(()=>new Array(e).fill(-5))),a?a<10?d(this,o,10):a>(e-1)*(t-1)?d(this,o,(e-1)*(t-1)):d(this,o,a):e+t<32?d(this,o,Math.floor(.13*e*t)):e+t<46?d(this,o,Math.floor(.19*e*t)):d(this,o,Math.floor(.25*e*t))}init_mine(){let e=s(this,o);const t=new Array(s(this,f)*s(this,_)).fill(0).map((l,r)=>r);let a;for(;e>0;)a=Math.floor(Math.random()*t.length),s(this,i)[Math.floor(t[a]/s(this,f))][t[a]%s(this,f)]=-6,t.splice(a,1),e-=1}count_around(e,t){let a=0;for(let l=Math.max(0,t-1);l<=Math.min(s(this,_)-1,t+1);l++)for(let r=Math.max(0,e-1);r<=Math.min(s(this,f)-1,e+1);r++)(s(this,i)[l][r]===-6||s(this,i)[l][r]===-4||s(this,i)[l][r]===-2)&&(a+=1);return a}dig(e,t){const a=s(this,i)[t][e];if(a>=0)return[!1,"unknown"];if(a===-3||a===-4||a===-1||a===-2)return[!1,"unknown"];if(a===-6)return[!0,"die"];{let l=this.count_around(e,t);if(s(this,i)[t][e]=l,l===0)for(let r=Math.max(0,t-1);r<=Math.min(s(this,_)-1,t+1);r++)for(let p=Math.max(0,e-1);p<=Math.min(s(this,f)-1,e+1);p++)this.dig(p,r);return[!1,"unknown"]}}mark(e,t){const a=s(this,i)[t][e];a>=0||(a===-6?s(this,i)[t][e]=-4:a===-4?s(this,i)[t][e]=-2:a===-2?s(this,i)[t][e]=-6:a===-5?s(this,i)[t][e]=-3:a===-3?s(this,i)[t][e]=-1:a===-1&&(s(this,i)[t][e]=-5))}have_a_look(){return s(this,i).map(e=>[...e])}}f=new WeakMap,_=new WeakMap,i=new WeakMap,o=new WeakMap;const q={class:"mine-sweeper"},G=$('<div class="banner-area" data-v-d5448ab6><div class="ipt" data-v-d5448ab6><span data-v-d5448ab6>\u5BBD\u5EA6: </span><input type="number" data-v-d5448ab6></div><div class="ipt" data-v-d5448ab6><span data-v-d5448ab6>\u9AD8\u5EA6: </span><input type="number" data-v-d5448ab6></div><div class="ipt" data-v-d5448ab6><span data-v-d5448ab6>\u96F7\u6570: </span><input type="number" data-v-d5448ab6></div><div class="group" data-v-d5448ab6><div class="btn" title="\u63D0\u793A\u4E00\u4E2A\u5B89\u5168\u4F4D\u7F6E" data-v-d5448ab6><i class="iconfont icon-note" data-v-d5448ab6></i> \u63D0\u793A </div><div class="btn" title="\u5F00\u59CB" data-v-d5448ab6><i class="iconfont icon-start" data-v-d5448ab6></i> \u5F00\u59CB </div></div></div>',1),H={class:"ground-area"},J={class:"ground-container"},K=["onClick","onContextmenu"],O={key:0,class:"mark"},P={key:1,class:"mark"},Q={key:3,class:"label"},R=z({setup(n){const e=C(!1),t=new L,a=C(t.have_a_look()),l=(v,b)=>{if(e.value){alert("\u5DF2\u7ED3\u675F");return}e.value=t.dig(v,b)[0],a.value=t.have_a_look()},r=(v,b,M)=>{if(e.value){alert("\u5DF2\u7ED3\u675F");return}M.preventDefault(),t.mark(v,b),a.value=t.have_a_look()},p=v=>{switch(v){case 1:return"#ff0000";case 2:return"#ffa500";case 3:return"#ffff00";case 4:return"#008000";case 5:return"#2da0ff";case 6:return"#0000ff";case 7:return"#800080";case 8:return"#000000"}};return(v,b)=>(h(),c("div",q,[G,E("div",H,[E("div",J,[(h(!0),c(B,null,S(a.value,(M,w)=>(h(),c("div",{class:"row",key:"row-"+w},[(h(!0),c(B,null,S(M,(u,F)=>(h(),c("div",{class:j(["column",u<0?"uncheck":"checked"]),key:"col-"+F,onClick:N(A=>l(F,w),["left"]),onContextmenu:N(A=>r(F,w,A),["right"])},[u===-1||u===-2?(h(),c("span",O,k("\u2753"))):g("",!0),u===-3||u===-4?(h(),c("span",P,k("\u{1F6A9}"))):g("",!0),u>=0?(h(),c("span",{key:2,class:"label",style:I(`color: ${p(u)}`)},k(u>0?u:"\xA0"),5)):g("",!0),e.value&&(u===-6||u===-4||u===-2)?(h(),c("span",Q,k("\u{1F4A3}"))):g("",!0)],42,K))),128))]))),128))])])]))}});var W=V(R,[["__scopeId","data-v-d5448ab6"]]);export{W as default};
