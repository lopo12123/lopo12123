var U=(u,t,e)=>{if(!t.has(u))throw TypeError("Cannot "+e)};var i=(u,t,e)=>(U(u,t,"read from private field"),e?e.call(u):t.get(u)),A=(u,t,e)=>{if(t.has(u))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(u):t.set(u,e)},h=(u,t,e,s)=>(U(u,t,"write to private field"),s?s.call(u,e):t.set(u,e),e);import{_ as L,d as P,r as k,a as Y,b as Z,o as f,c as v,e as r,t as B,p as q,g as y,s as R,i as x,w as V,v as T,F as z,f as j,u as C,j as ee,k as H,l as b,n as te,h as G}from"./index.57a5101f.js";var F,p,w,n,m;class se{constructor(t=9,e=9,s){A(this,F,!0);A(this,p,0);A(this,w,0);A(this,n,[]);A(this,m,0);this.init_game(t,e,s)}get mine(){return i(this,m)}init_ground(t=9,e=9,s){t<9?t=9:t>30&&(t=30),e<9?e=9:e>30&&(e=30),h(this,p,t),h(this,w,e),h(this,n,new Array(e).fill(0).map(()=>new Array(t).fill(-5))),s?s<10?h(this,m,10):s>(t-1)*(e-1)?h(this,m,(t-1)*(e-1)):h(this,m,s):t+e<32?h(this,m,Math.floor(.13*t*e)):t+e<46?h(this,m,Math.floor(.19*t*e)):h(this,m,Math.floor(.25*t*e))}init_mine(){let t=i(this,m);const e=new Array(i(this,p)*i(this,w)).fill(0).map((a,l)=>l);let s;for(;t>0;)s=Math.floor(Math.random()*e.length),i(this,n)[Math.floor(e[s]/i(this,p))][e[s]%i(this,p)]=-6,e.splice(s,1),t-=1}init_game(t=9,e=9,s){this.init_ground(t,e,s),this.init_mine(),h(this,F,!0)}count_around(t,e){let s=0;for(let a=Math.max(0,e-1);a<=Math.min(i(this,w)-1,e+1);a++)for(let l=Math.max(0,t-1);l<=Math.min(i(this,p)-1,t+1);l++)(i(this,n)[a][l]===-6||i(this,n)[a][l]===-4||i(this,n)[a][l]===-2)&&(s+=1);return s}dig(t,e){const s=i(this,n)[e][t];if(s===-3||s===-4||s===-1||s===-2)return[!1,"continue"];if(s>=0)return[!1,"continue"];if(s===-6)if(i(this,F)){for(let a=0;a<i(this,w);a++)for(let l=0;l<i(this,p);l++){if(i(this,n)[a][l]===-5)return i(this,n)[e][t]=-5,i(this,n)[a][l]=-6,this.dig(t,e);if(i(this,n)[a][l]===-3)return i(this,n)[e][t]=-5,i(this,n)[a][l]=-4,this.dig(t,e);if(i(this,n)[a][l]===-1)return i(this,n)[e][t]=-5,i(this,n)[a][l]=-2,this.dig(t,e)}return[!1,"never"]}else return[!0,"die"];else{i(this,F)&&h(this,F,!1);let a=this.count_around(t,e);if(i(this,n)[e][t]=a,a===0)for(let l=Math.max(0,e-1);l<=Math.min(i(this,w)-1,e+1);l++)for(let _=Math.max(0,t-1);_<=Math.min(i(this,p)-1,t+1);_++)this.dig(_,l);return this.show_me_safe()[0]===-1?[!0,"win"]:[!1,"continue"]}}mark(t,e){const s=i(this,n)[e][t];s>=0||(s===-6?i(this,n)[e][t]=-4:s===-4?i(this,n)[e][t]=-2:s===-2?i(this,n)[e][t]=-6:s===-5?i(this,n)[e][t]=-3:s===-3?i(this,n)[e][t]=-1:s===-1&&(i(this,n)[e][t]=-5))}show_me_safe(){let t=[-1,-1],e=[-1,-1];for(let s=0;s<i(this,w);s++)for(let a=0;a<i(this,p);a++){if(i(this,n)[s][a]===-5)return[a,s];i(this,n)[s][a]===-1&&t[0]===-1?t=[a,s]:i(this,n)[s][a]===-3&&e[0]===-1&&(e=[a,s])}return t[0]!==-1?t:e[0]!==-1?e:[-1,-1]}have_a_look(){return i(this,n).map(t=>[...t])}}F=new WeakMap,p=new WeakMap,w=new WeakMap,n=new WeakMap,m=new WeakMap;const ie=u=>(q("data-v-3e35d03e"),u=u(),y(),u),ae={class:"timer-box"},ne={class:"min"},le=ie(()=>r("div",{class:"tick"}," : ",-1)),ue={class:"sec"},re=P({emits:["ready"],setup(u,{emit:t}){const e=k(null),s=k(0),a=k(0),l=()=>{e.value!==null&&clearInterval(e.value),s.value=0,a.value=0,e.value=setInterval(()=>{a.value===59?(a.value=0,s.value=(s.value+1)%60):a.value+=1},1e3)},_=()=>{e.value!==null&&clearInterval(e.value),e.value=null};return Y(()=>{t("ready",{start:l,stop:_})}),Z(()=>{_()}),(D,$)=>(f(),v("div",ae,[r("div",ne,B(s.value<10?"0"+s.value:""+s.value),1),le,r("div",ue,B(a.value<10?"0"+a.value:""+a.value),1)]))}});var oe=L(re,[["__scopeId","data-v-3e35d03e"]]);const I=u=>(q("data-v-7e34040c"),u=u(),y(),u),ce={class:"mine-sweeper"},he={class:"banner-area"},_e={class:"ipt"},de=I(()=>r("span",null,"\u5BBD\u5EA6: ",-1)),fe={class:"ipt"},ve=I(()=>r("span",null,"\u9AD8\u5EA6: ",-1)),pe={class:"ipt"},me=I(()=>r("span",null,"\u96F7\u6570: ",-1)),ge=I(()=>r("i",{class:"iconfont icon-note"},null,-1)),ke=G(" \u63D0\u793A "),we=[ge,ke],Be=I(()=>r("i",{class:"iconfont icon-start"},null,-1)),Fe=G(" \u5F00\u59CB "),Me=[Be,Fe],Ae={class:"ground-area"},Ce={class:"ground-container"},be=["onClick","onContextmenu"],Ie={key:0,class:"mark"},Ee={key:1,class:"mark"},Se={key:2,class:"tip"},De={key:4,class:"label"},$e=P({setup(u){const t=k("wait"),e=new se,s=k(e.have_a_look()),a=k("9"),l=k("9"),_=k("10"),D=R(()=>{}),$=R(()=>{}),J=g=>{D.value=g.start,$.value=g.stop},M=k([-1,-1]),K=()=>{if(t.value!=="start"){C().info("\u8BF7\u70B9\u51FB\u5F00\u59CB\u6309\u94AE");return}M.value=e.show_me_safe()},O=()=>{t.value="start",e.init_game(parseInt(a.value)||9,parseInt(l.value)||9,parseInt(_.value)||0),s.value=e.have_a_look(),_.value=e.mine+"",D.value()},Q=(g,d)=>{if(t.value!=="start"){C().info("\u8BF7\u70B9\u51FB\u5F00\u59CB\u6309\u94AE");return}M.value[0]===g&&M.value[1]===d&&(M.value=[-1,-1]);const o=e.dig(g,d);o[0]&&($.value(),t.value="end",o[1]==="win"?C().success("you win!"):C().error("you failed!")),s.value=e.have_a_look()},W=(g,d,o)=>{if(t.value!=="start"){C().info("\u8BF7\u70B9\u51FB\u5F00\u59CB\u6309\u94AE");return}o.preventDefault(),e.mark(g,d),s.value=e.have_a_look()},X=g=>{switch(g){case 1:return"#ff0000";case 2:return"#ffa500";case 3:return"#b0b047";case 4:return"#008000";case 5:return"#2da0ff";case 6:return"#0000ff";case 7:return"#800080";case 8:return"#000000"}};return(g,d)=>(f(),v("div",ce,[r("div",he,[x(oe,{onReady:J}),r("div",_e,[de,V(r("input",{type:"number","onUpdate:modelValue":d[0]||(d[0]=o=>a.value=o),placeholder:"\u8303\u56F4: 9 - 30"},null,512),[[T,a.value]])]),r("div",fe,[ve,V(r("input",{type:"number","onUpdate:modelValue":d[1]||(d[1]=o=>l.value=o),placeholder:"\u8303\u56F4: 9 - 30"},null,512),[[T,l.value]])]),r("div",pe,[me,V(r("input",{type:"number","onUpdate:modelValue":d[2]||(d[2]=o=>_.value=o),placeholder:"\u6700\u5C0F\u4E3A10\u4E2A"},null,512),[[T,_.value]])]),r("div",{class:"group"},[r("div",{class:"btn",title:"\u63D0\u793A\u4E00\u4E2A\u5B89\u5168\u4F4D\u7F6E",onClick:K},we),r("div",{class:"btn",title:"\u5F00\u59CB",onClick:O},Me)])]),r("div",Ae,[r("div",Ce,[(f(!0),v(z,null,j(s.value,(o,E)=>(f(),v("div",{class:"row",key:"row-"+E},[(f(!0),v(z,null,j(o,(c,S)=>(f(),v("div",{class:ee(["column",c<0?"uncheck":"checked"]),key:"col-"+S,onClick:H(N=>Q(S,E),["left"]),onContextmenu:H(N=>W(S,E,N),["right"])},[c===-1||c===-2?(f(),v("span",Ie,B("\u2753"))):b("",!0),c===-3||c===-4?(f(),v("span",Ee,B("\u{1F6A9}"))):b("",!0),S===M.value[0]&&E===M.value[1]?(f(),v("span",Se,B("\u{1F447}"))):b("",!0),c>=0?(f(),v("span",{key:3,class:"label",style:te(`color: ${X(c)}`)},B(c>0?c:"\xA0"),5)):b("",!0),t.value==="end"&&(c===-6||c===-4||c===-2)?(f(),v("span",De,B("\u{1F4A3}"))):b("",!0)],42,be))),128))]))),128))])])]))}});var Ne=L($e,[["__scopeId","data-v-7e34040c"]]);export{Ne as default};
