var L=Object.defineProperty;var I=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var C=(s,e,n)=>e in s?L(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n,k=(s,e)=>{for(var n in e||(e={}))H.call(e,n)&&C(s,n,e[n]);if(I)for(var n of I(e))_.call(e,n)&&C(s,n,e[n]);return s};var m=(s,e,n)=>(C(s,typeof e!="symbol"?e+"":e,n),n);import{u as W,r as c,j as d,a as t,C as O,T as D,v as z,b as F,O as P,f as x,I as R,R as B,H as G,c as X,d as v,e as Y}from"./vendor.8a512cb0.js";const U=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const p of r.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&a(p)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerpolicy&&(r.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?r.credentials="include":i.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}};U();const M=["vite-react-ts","vite-vue-ts"],$=(s,e)=>{s(`/sub-app/${e}`)},q=[{label:"Image Parser",icon:"pi pi-images",path:"image-parser"}],K=(s,e)=>{s(`/tool/${e}`)},V=[{label:"zt",icon:"pi pi-bolt",path:"zt"}],J=(s,e)=>{console.log("to misc: ",e)};class Q{constructor(){m(this,"ref",null)}bind(e){this.ref=e}info(e,n,a=3e3){var i;(i=this.ref)==null||i.show({severity:"info",summary:n,detail:e,life:a})}success(e,n,a=3e3){var i;(i=this.ref)==null||i.show({severity:"success",summary:n,detail:e,life:a})}warn(e,n,a=3e3){var i;(i=this.ref)==null||i.show({severity:"warn",summary:n,detail:e,life:a})}error(e,n,a=3e3){var i;(i=this.ref)==null||i.show({severity:"error",summary:n,detail:e,life:a})}clear(){var e;(e=this.ref)==null||e.clear()}replyCancel(){this.info("Think twice before you press your mouse!")}}const Z=new Q,g=()=>Z;function ee(){const s=W(),e=g(),n=c.exports.useRef(null),a=[{label:"What do you want?",disabled:!0},{label:"Home",icon:"pi pi-home",command(){s("/")}},{label:"Sub App",icon:"pi pi-sitemap",items:M.map(o=>({label:o,icon:"pi pi-book",command(){$(s,o)}}))},{label:"Tool",icon:"pi pi-box",items:q.map(o=>({label:o.label,icon:o.icon,command(){K(s,o.path)}}))},{label:"Misc",icon:"pi pi-hashtag",items:V.map(o=>({label:o.label,icon:o.icon,command(){J(s,o.path)}}))},{label:"Star Me",icon:"pi pi-star",command:()=>{window.open("https://github.com/lopo12123/lopo12123","_blank")}},{label:"Noting",icon:"pi pi-power-off",command(){e.replyCancel()}}],[i,r]=c.exports.useState(!1),[p,h]=c.exports.useState(!1);return d("div",{children:[t("div",{className:"drag-controller",onContextMenu:o=>{var u;(u=n.current)==null||u.show(o)},children:t("div",{id:"navigate-menu","data-pr-tooltip":"you can drag me anywhere.",style:{position:"relative",width:p?"80px":"40px",height:"40px",marginLeft:p?"0":"20px",border:"dashed 1px #777777",borderRadius:"5px",display:"flex",alignItems:"center",justifyContent:"center",transition:"ease 1s",overflow:"hidden"},onMouseEnter:()=>{i||h(!0)},onMouseLeave:()=>{i||h(!1)},children:p?d("span",{style:{color:"#777777",fontFamily:"Curlz MT",fontSize:"16px",fontWeight:"bold",lineHeight:"16px",whiteSpace:"nowrap"},children:["Right-Click ",t("br",{}),"Show Menu"]}):t("span",{className:"custom-rgb",style:{opacity:"0.5"},children:t("i",{className:"pi pi-cog pi-spin",style:{fontSize:"24px"}})})})}),t(O,{ref:n,model:a,onShow:()=>{r(!0)},onHide:()=>{r(!1),h(!1)}}),t(D,{target:"#navigate-menu",mouseTrack:!0,mouseTrackTop:20,position:"bottom"})]})}const A=s=>{const e=s.currentTarget,n=e.dataset.dragTarget,i=(s.path||s.composedPath&&s.composedPath()).find(u=>!!u.dataset.dragId&&u.dataset.dragId===n);if(!e||!n||!i)return;const r=s.clientX-i.offsetLeft,p=s.clientY-i.offsetTop,h=u=>{const y=u.clientX-r,w=u.clientY-p;y>0&&y<window.innerWidth-e.offsetWidth-10&&(i.style.left=y+"px"),w>0&&w<window.innerHeight-e.offsetHeight-10&&(i.style.top=w+"px")},o=()=>{document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",o)};document.addEventListener("mousemove",h),document.addEventListener("mouseup",o)},te=({innerEl:s,initPos:e})=>{const n=c.exports.useRef(null),a=z();return c.exports.useLayoutEffect(()=>{var r;const i=(r=n.current)==null?void 0:r.getElementsByClassName("drag-controller")[0];if(!i)throw new Error("No controller for this draggable element.");return i.dataset.dragTarget=a,i.style.cursor="grab",i.style.userSelect="none",i.addEventListener("mousedown",A),()=>{i.removeEventListener("mousedown",A)}},[]),t("div",{ref:n,"data-drag-id":a,style:k({position:"absolute",zIndex:"10000",width:"fit-content",height:"fit-content"},e),children:s})};function ie(){const s=c.exports.useRef(null);return c.exports.useEffect(()=>(g().bind(s.current),()=>{g().bind(null)}),[]),d("div",{className:"App custom-cursor",style:{position:"relative",width:"100%",height:"100%"},children:[t(F,{ref:s}),t(te,{initPos:{right:"50px",top:"50px"},innerEl:t(ee,{})},"test"),t(P,{})]})}const se=()=>t("div",{children:"hello"});class ne{static readBlobAsDataUrl(e){return new Promise((n,a)=>{const i=new FileReader;i.onload=()=>{n(i.result)},i.onerror=r=>{a(r)},i.readAsDataURL(e)})}}class j{constructor(e){m(this,"canvas");m(this,"grayFilter",new x.fabric.Image.filters.Grayscale);m(this,"originWidth");m(this,"originHeight");this.canvas=e}getSize(){var e,n;return[(e=this.originWidth)!=null?e:0,(n=this.originHeight)!=null?n:0]}render(e){return new Promise((n,a)=>{ne.readBlobAsDataUrl(e).then(i=>{const r=document.createElement("img");r.src=i,x.fabric.Image.fromURL(i,p=>{var h,o;this.canvas.clear().add(p),this.originWidth=this.canvas._objects[0].width,this.originHeight=this.canvas._objects[0].height,n([i,(h=this.originWidth)!=null?h:0,(o=this.originHeight)!=null?o:0])})}).catch(a)})}reset(){const e=this.canvas._objects[0];e.scaleX=1,e.scaleY=1,e.opacity=1,e.filters=[],this.canvas._objects[0].applyFilters(),this.canvas.renderAll()}setOpacity(e){return e<0||e>1?!1:(this.canvas._objects[0].opacity=e,this.canvas.renderAll(),!0)}setWidth(e){return this.originWidth?(this.canvas._objects[0].scaleX=e/this.originWidth,this.canvas.renderAll(),!0):!1}setHeight(e){return this.originHeight?(this.canvas._objects[0].scaleY=e/this.originHeight,this.canvas.renderAll(),!0):!1}setGray(e){this.canvas._objects[0].filters=e?[this.grayFilter]:[],this.canvas._objects[0].applyFilters(),this.canvas.renderAll()}download(){if(!this.originWidth||!this.originHeight)return;const e=[this.canvas.getWidth(),this.canvas.getHeight()],n=[this.canvas._objects[0].getScaledWidth(),this.canvas._objects[0].getScaledHeight()];this.canvas._objects[0].left=0,this.canvas._objects[0].top=0,this.canvas.width=n[0],this.canvas.height=n[1];const a=document.createElement("a");a.download="file"+Date.now()+".png",a.href=this.canvas.toDataURL(),a.click(),this.canvas.width=e[0],this.canvas.height=e[1],this.canvas.renderAll()}}m(j,"allowType",["jpg","png"]);const ae=s=>{const e=c.exports.useRef(null),n=c.exports.useRef(null);return c.exports.useLayoutEffect(()=>{if(!!e.current&&!!n.current){const[a,i]=[e.current.offsetWidth-20,e.current.offsetHeight-20],r=new j(new x.fabric.Canvas(n.current,{width:a,height:i}));s.onInit(r)}else s.onInit(null)},[]),t("div",{className:"custom-scroll",ref:e,style:{position:"relative",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",overflow:"auto"},children:t("canvas",{ref:n,style:{position:"relative",border:"solid 1px #cccccc"}})})},re=()=>{const s=c.exports.useRef(null),[e,n]=c.exports.useState(""),[a,i]=c.exports.useState(null),r=l=>{a?a.render(l).then(([f,S,E])=>{n(f),h(S),u(E),g().success("Image loaded")}).catch(f=>{g().error(f.toString())}):g().warn("Please wait for canvas to finish initializing")},[p,h]=c.exports.useState(0),[o,u]=c.exports.useState(0),[y,w]=c.exports.useState(1),[N,T]=c.exports.useState(!1),b=l=>{if(!a||!e)g().warn("Select a file first");else switch(l){case"reset":a.reset();const[f,S]=a.getSize();h(f),u(S),w(1),T(!1);break;case"width":a.setWidth(p);break;case"height":a.setHeight(o);break;case"opacity":a.setOpacity(y);break;case"gray":a.setGray(!N),T(!N);break;case"download":a.download();break}};return d("div",{style:{position:"relative",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[d("div",{style:{position:"relative",width:"299px",height:"100%",borderRight:"solid 1px #cccccc"},children:[t("input",{ref:s,type:"file",style:{display:"none"},onChange:()=>{if(s.current.files.length>0){const l=s.current.files[0],[f,...S]=l.name.split(".").reverse();j.allowType.includes(f)?r(l):g().error("Type not allowed: *."+f)}}}),t("div",{style:{position:"relative",width:"100%",height:"30px",fontFamily:"Curlz MT",fontSize:"24px",fontWeight:"bold",letterSpacing:"3px",lineHeight:"30px",textAlign:"center"},children:"Operate"}),d("div",{style:{position:"relative",width:"calc(100% - 40px)",height:"calc(100% - 30px)",margin:"0 20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-evenly"},children:[e!==""?t("img",{style:{position:"relative",width:"calc(100% - 40px)",margin:"0 20px"},src:e,alt:""}):"",t("div",{style:{width:"100%"},onClick:()=>{var l;(l=s.current)==null||l.click()},children:d("span",{className:"p-inputgroup-addon",children:[t("i",{className:"pi pi-upload"}),"\xA0Select (*.jpg, *.png)"]})}),t("div",{style:{width:"100%"},onClick:()=>{b("reset")},children:d("span",{className:"p-inputgroup-addon",children:[t("i",{className:"pi pi-images"}),"\xA0Reset"]})}),d("div",{className:"p-inputgroup",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[t("span",{className:"p-inputgroup-addon",style:{width:"80px"},children:"Width"}),t(R,{value:p,step:10,min:0,allowEmpty:!1,suffix:" px",onChange:l=>{h(l.value)}}),t("span",{className:"p-inputgroup-addon",onClick:()=>{b("width")},children:t("span",{children:t("i",{className:"pi pi-check"})})})]}),d("div",{className:"p-inputgroup",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[t("span",{className:"p-inputgroup-addon",style:{width:"80px"},children:"Height"}),t(R,{value:o,step:10,min:0,allowEmpty:!1,suffix:" px",onChange:l=>{u(l.value)}}),t("span",{className:"p-inputgroup-addon",onClick:()=>{b("height")},children:t("span",{children:t("i",{className:"pi pi-check"})})})]}),d("div",{className:"p-inputgroup",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[t("span",{className:"p-inputgroup-addon",style:{width:"80px"},children:"Opacity"}),t(R,{value:y,min:0,max:1,step:.05,minFractionDigits:2,maxFractionDigits:2,allowEmpty:!1,onChange:l=>{w(l.value)}}),t("span",{className:"p-inputgroup-addon",onClick:()=>{b("opacity")},children:t("span",{children:t("i",{className:"pi pi-check"})})})]}),t("div",{style:{width:"100%"},onClick:()=>{b("gray")},children:d("span",{className:"p-inputgroup-addon",children:[t("i",{className:"pi pi-sync"}),"\xA0",N?"RGB":t("b",{children:"RGB"}),"\xA0",t("i",{className:"pi pi-arrows-h"}),"\xA0",N?t("b",{children:"Gray"}):"Gray"]})}),t("div",{style:{width:"100%"},onClick:()=>{b("download")},children:d("span",{className:"p-inputgroup-addon",children:[t("i",{className:"pi pi-download"}),"\xA0Download (*.png)"]})})]})]}),t("div",{style:{position:"relative",width:"calc(100% - 300px)",height:"100%"},children:t(ae,{onInit:l=>{i(l)}})})]})},oe=()=>{const s=c.exports.useRef(null);return c.exports.useLayoutEffect(()=>{const e=new x.fabric.Canvas(s.current),n=new x.fabric.Rect({top:100,left:100,width:60,height:60,fill:"#cccccc"});e.add(n)},[]),t("div",{children:t("canvas",{ref:s})})},ce="/lopo12123/packages/{SPA_NAME}/main.js";B.render(t(c.exports.StrictMode,{children:t(G,{children:t(X,{children:d(v,{path:"/",element:t(ie,{}),children:[t(v,{path:"",element:t(se,{})}),t(v,{path:"test",element:t(oe,{})}),t(v,{path:"tool",children:t(v,{path:"image-parser",element:t(re,{})})}),t(v,{path:"sub-app",children:M.map((s,e)=>t(v,{path:s,element:t(Y,{entryPath:ce.replace("{SPA_NAME}",s)},s)},e))})]})})})}),document.getElementById("root"));
