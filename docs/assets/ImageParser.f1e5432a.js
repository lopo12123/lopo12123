var he=Object.defineProperty,fe=Object.defineProperties;var de=Object.getOwnPropertyDescriptors;var X=Object.getOwnPropertySymbols;var ye=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable;var E=(r,i,s)=>i in r?he(r,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[i]=s,N=(r,i)=>{for(var s in i||(i={}))ye.call(i,s)&&E(r,s,i[s]);if(X)for(var s of X(i))me.call(i,s)&&E(r,s,i[s]);return r},J=(r,i)=>fe(r,de(i));var S=(r,i,s)=>(E(r,typeof i!="symbol"?i+"":i,s),s);import{f as U,r as v,a as c,D as C,g as ge,t as re,h as k,i as ve,j as g,k as Q,F as be}from"./vendor.943528eb.js";import{u as O}from"./index.1c2006d1.js";const G=class{constructor(i){S(this,"canvas");S(this,"grayFilter",new U.fabric.Image.filters.Grayscale);S(this,"originWidth");S(this,"originHeight");this.canvas=i}static readBlobAsDataUrl(i){return new Promise((s,t)=>{const e=new FileReader;e.onload=()=>{s(e.result)},e.onerror=n=>{t(n)},e.readAsDataURL(i)})}getSize(){var i,s;return[(i=this.originWidth)!=null?i:0,(s=this.originHeight)!=null?s:0]}render(i){return new Promise((s,t)=>{G.readBlobAsDataUrl(i).then(e=>{const n=document.createElement("img");n.src=e,U.fabric.Image.fromURL(e,o=>{var a,u;this.canvas.clear().add(o),this.originWidth=this.canvas._objects[0].width,this.originHeight=this.canvas._objects[0].height,s([e,(a=this.originWidth)!=null?a:0,(u=this.originHeight)!=null?u:0])})}).catch(t)})}reset(){const i=this.canvas._objects[0];i.scaleX=1,i.scaleY=1,i.opacity=1,i.filters=[],this.canvas._objects[0].applyFilters(),this.canvas.renderAll()}setOpacity(i){return i<0||i>1?!1:(this.canvas._objects[0].opacity=i,this.canvas.renderAll(),!0)}setWidth(i){return this.originWidth?(this.canvas._objects[0].scaleX=i/this.originWidth,this.canvas.renderAll(),!0):!1}setHeight(i){return this.originHeight?(this.canvas._objects[0].scaleY=i/this.originHeight,this.canvas.renderAll(),!0):!1}setGray(i){this.canvas._objects[0].filters=i?[this.grayFilter]:[],this.canvas._objects[0].applyFilters(),this.canvas.renderAll()}download(){if(!this.originWidth||!this.originHeight)return;const i=[this.canvas.getWidth(),this.canvas.getHeight()],s=[this.canvas._objects[0].getScaledWidth(),this.canvas._objects[0].getScaledHeight()];this.canvas._objects[0].left=0,this.canvas._objects[0].top=0,this.canvas.width=s[0],this.canvas.height=s[1];const t=document.createElement("a");t.download="file"+Date.now()+".png",t.href=this.canvas.toDataURL(),t.click(),this.canvas.width=i[0],this.canvas.height=i[1],this.canvas.renderAll()}};let P=G;S(P,"allowType",["jpg","png"]);const we=r=>{const i=v.exports.useRef(null),s=v.exports.useRef(null);return v.exports.useLayoutEffect(()=>{if(!!i.current&&!!s.current){const[t,e]=[i.current.offsetWidth-20,i.current.offsetHeight-20],n=new P(new U.fabric.Canvas(s.current,{width:t,height:e}));r.onInit(n)}else r.onInit(null)},[]),c("div",{className:"custom-scroll",ref:i,style:{position:"relative",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",overflow:"auto"},children:c("canvas",{ref:s,style:{position:"relative",border:"solid 1px #cccccc"}})})};function xe(r,i){if(!(r instanceof i))throw new TypeError("Cannot call a class as a function")}function Z(r,i){for(var s=0;s<i.length;s++){var t=i[s];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function De(r,i,s){return i&&Z(r.prototype,i),s&&Z(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r}function z(r,i,s){return i in r?Object.defineProperty(r,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[i]=s,r}var R=function(){function r(){xe(this,r)}return De(r,null,[{key:"isNavKeyPress",value:function(s){var t=s.keyCode;return t=C.getBrowser().safari&&r.SAFARI_KEYS[t]||t,t>=33&&t<=40||t===r.KEYS.RETURN||t===r.KEYS.TAB||t===r.KEYS.ESC}},{key:"isSpecialKey",value:function(s){var t=s.keyCode;return t===9||t===13||t===27||t===16||t===17||t>=18&&t<=20||C.getBrowser().opera&&!s.shiftKey&&(t===8||t>=33&&t<=35||t>=36&&t<=39||t>=44&&t<=45)}},{key:"getKey",value:function(s){var t=s.keyCode||s.charCode;return C.getBrowser().safari&&r.SAFARI_KEYS[t]||t}},{key:"getCharCode",value:function(s){return s.charCode||s.keyCode||s.which}},{key:"onKeyPress",value:function(s,t,e){if(!e){var n=r.DEFAULT_MASKS[t]?r.DEFAULT_MASKS[t]:t,o=C.getBrowser();if(!(s.ctrlKey||s.altKey)){var a=this.getKey(s);if(!(o.mozilla&&(this.isNavKeyPress(s)||a===r.KEYS.BACKSPACE||a===r.KEYS.DELETE&&s.charCode===0))){var u=this.getCharCode(s),p=String.fromCharCode(u);o.mozilla&&(this.isSpecialKey(s)||!p)||n.test(p)||s.preventDefault()}}}}},{key:"validate",value:function(s,t){var e=s.target.value,n=!0;return e&&!t.test(e)&&(n=!1),n}}]),r}();z(R,"DEFAULT_MASKS",{pint:/[\d]/,int:/[\d\-]/,pnum:/[\d\.]/,money:/[\d\.\s,]/,num:/[\d\-\.]/,hex:/[0-9a-f]/i,email:/[a-z0-9_\.\-@]/i,alpha:/[a-z_]/i,alphanum:/[a-z0-9_]/i});z(R,"KEYS",{TAB:9,RETURN:13,ESC:27,BACKSPACE:8,DELETE:46});z(R,"SAFARI_KEYS",{63234:37,63235:39,63232:38,63233:40,63276:33,63277:34,63272:46,63273:36,63275:35});function Ie(r,i){if(!(r instanceof i))throw new TypeError("Cannot call a class as a function")}function ee(r,i){for(var s=0;s<i.length;s++){var t=i[s];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function ke(r,i,s){return i&&ee(r.prototype,i),s&&ee(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r}function j(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function T(r,i){return T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},T(r,i)}function Se(r,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(i&&i.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),i&&T(r,i)}function A(r){return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},A(r)}function Ce(r,i){if(i&&(A(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return j(r)}function K(r){return K=Object.setPrototypeOf?Object.getPrototypeOf:function(s){return s.__proto__||Object.getPrototypeOf(s)},K(r)}function se(r,i,s){return i in r?Object.defineProperty(r,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[i]=s,r}function te(r,i){var s=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);i&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),s.push.apply(s,t)}return s}function _e(r){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?te(Object(s),!0).forEach(function(t){se(r,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(s)):te(Object(s)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(s,t))})}return r}function Oe(r){var i=Re();return function(){var t=K(r),e;if(i){var n=K(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ce(this,e)}}function Re(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ae=function(r){Se(s,r);var i=Oe(s);function s(t){var e;return Ie(this,s),e=i.call(this,t),e.onInput=e.onInput.bind(j(e)),e.onKeyPress=e.onKeyPress.bind(j(e)),e.elementRef=v.exports.createRef(e.props.forwardRef),e}return ke(s,[{key:"isFilled",value:function(){return this.props.value!=null&&this.props.value.toString().length>0||this.props.defaultValue!=null&&this.props.defaultValue.toString().length>0||this.elementRef&&this.elementRef.current&&this.elementRef.current.value!=null&&this.elementRef.current.value.toString().length>0}},{key:"onKeyPress",value:function(e){this.props.onKeyPress&&this.props.onKeyPress(e),this.props.keyfilter&&R.onKeyPress(e,this.props.keyfilter,this.props.validateOnly)}},{key:"onInput",value:function(e){var n=!0;this.props.keyfilter&&this.props.validateOnly&&(n=R.validate(e,this.props.keyfilter)),this.props.onInput&&this.props.onInput(e,n),this.props.onChange||(e.target.value.length>0?C.addClass(e.target,"p-filled"):C.removeClass(e.target,"p-filled"))}},{key:"updateForwardRef",value:function(){var e=this.props.forwardRef;e&&(typeof e=="function"?e(this.elementRef.current):e.current=this.elementRef.current)}},{key:"componentDidMount",value:function(){this.updateForwardRef(),this.props.tooltip&&this.renderTooltip()}},{key:"componentDidUpdate",value:function(e){(e.tooltip!==this.props.tooltip||e.tooltipOptions!==this.props.tooltipOptions)&&(this.tooltip?this.tooltip.update(_e({content:this.props.tooltip},this.props.tooltipOptions||{})):this.renderTooltip())}},{key:"componentWillUnmount",value:function(){this.tooltip&&(this.tooltip.destroy(),this.tooltip=null)}},{key:"renderTooltip",value:function(){this.tooltip=re({target:this.elementRef.current,content:this.props.tooltip,options:this.props.tooltipOptions})}},{key:"render",value:function(){var e=k("p-inputtext p-component",{"p-disabled":this.props.disabled,"p-filled":this.isFilled()},this.props.className),n=ve.findDiffKeys(this.props,s.defaultProps);return c("input",J(N({ref:this.elementRef},n),{className:e,onInput:this.onInput,onKeyPress:this.onKeyPress}))}}]),s}(v.exports.Component);se(ae,"defaultProps",{keyfilter:null,validateOnly:!1,tooltip:null,tooltipOptions:null,onInput:null,onKeyPress:null,forwardRef:null});var Be=ge.forwardRef(function(r,i){return c(ae,N({forwardRef:i},r))});function V(r,i){(i==null||i>r.length)&&(i=r.length);for(var s=0,t=new Array(i);s<i;s++)t[s]=r[s];return t}function Pe(r){if(Array.isArray(r))return V(r)}function Ke(r){if(typeof Symbol!="undefined"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function Me(r,i){if(!!r){if(typeof r=="string")return V(r,i);var s=Object.prototype.toString.call(r).slice(8,-1);if(s==="Object"&&r.constructor&&(s=r.constructor.name),s==="Map"||s==="Set")return Array.from(r);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return V(r,i)}}function Ee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ne(r){return Pe(r)||Ke(r)||Me(r)||Ee()}function Fe(r,i){if(!(r instanceof i))throw new TypeError("Cannot call a class as a function")}function ne(r,i){for(var s=0;s<i.length;s++){var t=i[s];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function Ue(r,i,s){return i&&ne(r.prototype,i),s&&ne(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r}function d(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function L(r,i){return L=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},L(r,i)}function je(r,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(i&&i.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),i&&L(r,i)}function W(r){return W=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},W(r)}function Te(r,i){if(i&&(W(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d(r)}function M(r){return M=Object.setPrototypeOf?Object.getPrototypeOf:function(s){return s.__proto__||Object.getPrototypeOf(s)},M(r)}function oe(r,i,s){return i in r?Object.defineProperty(r,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[i]=s,r}function ie(r,i){var s=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);i&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),s.push.apply(s,t)}return s}function F(r){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?ie(Object(s),!0).forEach(function(t){oe(r,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(s)):ie(Object(s)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(s,t))})}return r}function Ae(r){var i=Ve();return function(){var t=M(r),e;if(i){var n=M(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Te(this,e)}}function Ve(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var B=function(r){je(s,r);var i=Ae(s);function s(t){var e;return Fe(this,s),e=i.call(this,t),e.state={focused:!1},e.constructParser(),e.onInput=e.onInput.bind(d(e)),e.onInputKeyDown=e.onInputKeyDown.bind(d(e)),e.onInputKeyPress=e.onInputKeyPress.bind(d(e)),e.onInputClick=e.onInputClick.bind(d(e)),e.onInputBlur=e.onInputBlur.bind(d(e)),e.onInputFocus=e.onInputFocus.bind(d(e)),e.onPaste=e.onPaste.bind(d(e)),e.onUpButtonMouseLeave=e.onUpButtonMouseLeave.bind(d(e)),e.onUpButtonMouseDown=e.onUpButtonMouseDown.bind(d(e)),e.onUpButtonMouseUp=e.onUpButtonMouseUp.bind(d(e)),e.onUpButtonKeyDown=e.onUpButtonKeyDown.bind(d(e)),e.onUpButtonKeyUp=e.onUpButtonKeyUp.bind(d(e)),e.onDownButtonMouseLeave=e.onDownButtonMouseLeave.bind(d(e)),e.onDownButtonMouseDown=e.onDownButtonMouseDown.bind(d(e)),e.onDownButtonMouseUp=e.onDownButtonMouseUp.bind(d(e)),e.onDownButtonKeyDown=e.onDownButtonKeyDown.bind(d(e)),e.onDownButtonKeyUp=e.onDownButtonKeyUp.bind(d(e)),e.inputRef=v.exports.createRef(e.props.inputRef),e}return Ue(s,[{key:"getOptions",value:function(){return{localeMatcher:this.props.localeMatcher,style:this.props.mode,currency:this.props.currency,currencyDisplay:this.props.currencyDisplay,useGrouping:this.props.useGrouping,minimumFractionDigits:this.props.minFractionDigits,maximumFractionDigits:this.props.maxFractionDigits}}},{key:"constructParser",value:function(){this.numberFormat=new Intl.NumberFormat(this.props.locale,this.getOptions());var e=Ne(new Intl.NumberFormat(this.props.locale,{useGrouping:!1}).format(9876543210)).reverse(),n=new Map(e.map(function(o,a){return[o,a]}));this._numeral=new RegExp("[".concat(e.join(""),"]"),"g"),this._group=this.getGroupingExpression(),this._minusSign=this.getMinusSignExpression(),this._currency=this.getCurrencyExpression(),this._decimal=this.getDecimalExpression(),this._suffix=this.getSuffixExpression(),this._prefix=this.getPrefixExpression(),this._index=function(o){return n.get(o)}}},{key:"escapeRegExp",value:function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}},{key:"getDecimalExpression",value:function(){var e=new Intl.NumberFormat(this.props.locale,F(F({},this.getOptions()),{},{useGrouping:!1}));return new RegExp("[".concat(e.format(1.1).replace(this._currency,"").trim().replace(this._numeral,""),"]"),"g")}},{key:"getGroupingExpression",value:function(){var e=new Intl.NumberFormat(this.props.locale,{useGrouping:!0});return this.groupChar=e.format(1e6).trim().replace(this._numeral,"").charAt(0),new RegExp("[".concat(this.groupChar,"]"),"g")}},{key:"getMinusSignExpression",value:function(){var e=new Intl.NumberFormat(this.props.locale,{useGrouping:!1});return new RegExp("[".concat(e.format(-1).trim().replace(this._numeral,""),"]"),"g")}},{key:"getCurrencyExpression",value:function(){if(this.props.currency){var e=new Intl.NumberFormat(this.props.locale,{style:"currency",currency:this.props.currency,currencyDisplay:this.props.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});return new RegExp("[".concat(e.format(1).replace(/\s/g,"").replace(this._numeral,"").replace(this._group,""),"]"),"g")}return new RegExp("[]","g")}},{key:"getPrefixExpression",value:function(){if(this.props.prefix)this.prefixChar=this.props.prefix;else{var e=new Intl.NumberFormat(this.props.locale,{style:this.props.mode,currency:this.props.currency,currencyDisplay:this.props.currencyDisplay});this.prefixChar=e.format(1).split("1")[0]}return new RegExp("".concat(this.escapeRegExp(this.prefixChar||"")),"g")}},{key:"getSuffixExpression",value:function(){if(this.props.suffix)this.suffixChar=this.props.suffix;else{var e=new Intl.NumberFormat(this.props.locale,{style:this.props.mode,currency:this.props.currency,currencyDisplay:this.props.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});this.suffixChar=e.format(1).split("1")[1]}return new RegExp("".concat(this.escapeRegExp(this.suffixChar||"")),"g")}},{key:"formatValue",value:function(e){if(e!=null){if(e==="-")return e;if(this.props.format){var n=new Intl.NumberFormat(this.props.locale,this.getOptions()),o=n.format(e);return this.props.prefix&&(o=this.props.prefix+o),this.props.suffix&&(o=o+this.props.suffix),o}return e.toString()}return""}},{key:"parseValue",value:function(e){var n=e.replace(this._suffix,"").replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").replace(this._group,"").replace(this._minusSign,"-").replace(this._decimal,".").replace(this._numeral,this._index);if(n){if(n==="-")return n;var o=+n;return isNaN(o)?null:o}return null}},{key:"repeat",value:function(e,n,o){var a=this,u=n||500;this.clearTimer(),this.timer=setTimeout(function(){a.repeat(e,40,o)},u),this.spin(e,o)}},{key:"spin",value:function(e,n){if(this.inputRef&&this.inputRef.current){var o=this.props.step*n,a=this.parseValue(this.inputRef.current.value)||0,u=this.validateValue(a+o);this.updateInput(u,null,"spin"),this.updateModel(e,u),this.handleOnChange(e,a,u)}}},{key:"onUpButtonMouseDown",value:function(e){!this.props.disabled&&!this.props.readOnly&&(this.inputRef.current.focus(),this.repeat(e,null,1),e.preventDefault())}},{key:"onUpButtonMouseUp",value:function(){!this.props.disabled&&!this.props.readOnly&&this.clearTimer()}},{key:"onUpButtonMouseLeave",value:function(){!this.props.disabled&&!this.props.readOnly&&this.clearTimer()}},{key:"onUpButtonKeyUp",value:function(){!this.props.disabled&&!this.props.readOnly&&this.clearTimer()}},{key:"onUpButtonKeyDown",value:function(e){!this.props.disabled&&!this.props.readOnly&&(e.keyCode===32||e.keyCode===13)&&this.repeat(e,null,1)}},{key:"onDownButtonMouseDown",value:function(e){!this.props.disabled&&!this.props.readOnly&&(this.inputRef.current.focus(),this.repeat(e,null,-1),e.preventDefault())}},{key:"onDownButtonMouseUp",value:function(){!this.props.disabled&&!this.props.readOnly&&this.clearTimer()}},{key:"onDownButtonMouseLeave",value:function(){!this.props.disabled&&!this.props.readOnly&&this.clearTimer()}},{key:"onDownButtonKeyUp",value:function(){!this.props.disabled&&!this.props.readOnly&&this.clearTimer()}},{key:"onDownButtonKeyDown",value:function(e){!this.props.disabled&&!this.props.readOnly&&(e.keyCode===32||e.keyCode===13)&&this.repeat(e,null,-1)}},{key:"onInput",value:function(e){this.props.disabled||this.props.readOnly||(this.isSpecialChar&&(e.target.value=this.lastValue),this.isSpecialChar=!1)}},{key:"onInputKeyDown",value:function(e){if(!(this.props.disabled||this.props.readOnly)){if(this.lastValue=e.target.value,e.shiftKey||e.altKey){this.isSpecialChar=!0;return}var n=e.target.selectionStart,o=e.target.selectionEnd,a=e.target.value,u=null;switch(e.altKey&&e.preventDefault(),e.which){case 38:this.spin(e,1),e.preventDefault();break;case 40:this.spin(e,-1),e.preventDefault();break;case 37:this.isNumeralChar(a.charAt(n-1))||e.preventDefault();break;case 39:this.isNumeralChar(a.charAt(n))||e.preventDefault();break;case 13:u=this.validateValue(this.parseValue(a)),this.inputRef.current.value=this.formatValue(u),this.inputRef.current.setAttribute("aria-valuenow",u),this.updateModel(e,u);break;case 8:if(e.preventDefault(),n===o){var p=a.charAt(n-1),h=this.getDecimalCharIndexes(a),m=h.decimalCharIndex,y=h.decimalCharIndexWithoutPrefix;if(this.isNumeralChar(p)){var x=this.getDecimalLength(a);if(this._group.test(p))this._group.lastIndex=0,u=a.slice(0,n-2)+a.slice(n-1);else if(this._decimal.test(p))this._decimal.lastIndex=0,x?this.inputRef.current.setSelectionRange(n-1,n-1):u=a.slice(0,n-1)+a.slice(n);else if(m>0&&n>m){var b=this.isDecimalMode()&&(this.props.minFractionDigits||0)<x?"":"0";u=a.slice(0,n-1)+b+a.slice(n)}else y===1?(u=a.slice(0,n-1)+"0"+a.slice(n),u=this.parseValue(u)>0?u:""):u=a.slice(0,n-1)+a.slice(n)}this.updateValue(e,u,null,"delete-single")}else u=this.deleteRange(a,n,o),this.updateValue(e,u,null,"delete-range");break;case 46:if(e.preventDefault(),n===o){var l=a.charAt(n),f=this.getDecimalCharIndexes(a),w=f.decimalCharIndex,D=f.decimalCharIndexWithoutPrefix;if(this.isNumeralChar(l)){var I=this.getDecimalLength(a);if(this._group.test(l))this._group.lastIndex=0,u=a.slice(0,n)+a.slice(n+2);else if(this._decimal.test(l))this._decimal.lastIndex=0,I?this.$refs.input.$el.setSelectionRange(n+1,n+1):u=a.slice(0,n)+a.slice(n+1);else if(w>0&&n>w){var _=this.isDecimalMode()&&(this.props.minFractionDigits||0)<I?"":"0";u=a.slice(0,n)+_+a.slice(n+1)}else D===1?(u=a.slice(0,n)+"0"+a.slice(n+1),u=this.parseValue(u)>0?u:""):u=a.slice(0,n)+a.slice(n+1)}this.updateValue(e,u,null,"delete-back-single")}else u=this.deleteRange(a,n,o),this.updateValue(e,u,null,"delete-range");break}this.props.onKeyDown&&this.props.onKeyDown(e)}}},{key:"onInputKeyPress",value:function(e){if(!(this.props.disabled||this.props.readOnly)){var n=e.which||e.keyCode;n!==13&&e.preventDefault();var o=String.fromCharCode(n),a=this.isDecimalSign(o),u=this.isMinusSign(o);(48<=n&&n<=57||u||a)&&this.insert(e,o,{isDecimalSign:a,isMinusSign:u})}}},{key:"onPaste",value:function(e){if(e.preventDefault(),!(this.props.disabled||this.props.readOnly)){var n=(e.clipboardData||window.clipboardData).getData("Text");if(n){var o=this.parseValue(n);o!=null&&this.insert(e,o.toString())}}}},{key:"allowMinusSign",value:function(){return this.props.min===null||this.props.min<0}},{key:"isMinusSign",value:function(e){return this._minusSign.test(e)||e==="-"?(this._minusSign.lastIndex=0,!0):!1}},{key:"isDecimalSign",value:function(e){return this._decimal.test(e)?(this._decimal.lastIndex=0,!0):!1}},{key:"isDecimalMode",value:function(){return this.props.mode==="decimal"}},{key:"getDecimalCharIndexes",value:function(e){var n=e.search(this._decimal);this._decimal.lastIndex=0;var o=e.replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,""),a=o.search(this._decimal);return this._decimal.lastIndex=0,{decimalCharIndex:n,decimalCharIndexWithoutPrefix:a}}},{key:"getCharIndexes",value:function(e){var n=e.search(this._decimal);this._decimal.lastIndex=0;var o=e.search(this._minusSign);this._minusSign.lastIndex=0;var a=e.search(this._suffix);this._suffix.lastIndex=0;var u=e.search(this._currency);return this._currency.lastIndex=0,{decimalCharIndex:n,minusCharIndex:o,suffixCharIndex:a,currencyCharIndex:u}}},{key:"insert",value:function(e,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{isDecimalSign:!1,isMinusSign:!1},a=n.search(this._minusSign);if(this._minusSign.lastIndex=0,!(!this.allowMinusSign()&&a!==-1)){var u=this.inputRef.current.selectionStart,p=this.inputRef.current.selectionEnd,h=this.inputRef.current.value.trim(),m=this.getCharIndexes(h),y=m.decimalCharIndex,x=m.minusCharIndex,b=m.suffixCharIndex,l=m.currencyCharIndex,f;if(o.isMinusSign)u===0&&(f=h,(x===-1||p!==0)&&(f=this.insertText(h,n,0,p)),this.updateValue(e,f,n,"insert"));else if(o.isDecimalSign)y>0&&u===y?this.updateValue(e,h,n,"insert"):y>u&&y<p?(f=this.insertText(h,n,u,p),this.updateValue(e,f,n,"insert")):y===-1&&this.props.maxFractionDigits&&(f=this.insertText(h,n,u,p),this.updateValue(e,f,n,"insert"));else{var w=this.numberFormat.resolvedOptions().maximumFractionDigits,D=u!==p?"range-insert":"insert";if(y>0&&u>y){if(u+n.length-(y+1)<=w){var I=l>=u?l-1:b>=u?b:h.length;f=h.slice(0,u)+n+h.slice(u+n.length,I)+h.slice(I),this.updateValue(e,f,n,D)}}else f=this.insertText(h,n,u,p),this.updateValue(e,f,n,D)}}}},{key:"insertText",value:function(e,n,o,a){var u=n==="."?n:n.split(".");if(u.length===2){var p=e.slice(o,a).search(this._decimal);return this._decimal.lastIndex=0,p>0?e.slice(0,o)+this.formatValue(n)+e.slice(a):e||this.formatValue(n)}else return a-o===e.length?this.formatValue(n):o===0?n+e.slice(a):a===e.length?e.slice(0,o)+n:e.slice(0,o)+n+e.slice(a)}},{key:"deleteRange",value:function(e,n,o){var a;return o-n===e.length?a="":n===0?a=e.slice(o):o===e.length?a=e.slice(0,n):a=e.slice(0,n)+e.slice(o),a}},{key:"initCursor",value:function(){var e=this.inputRef.current.selectionStart,n=this.inputRef.current.value,o=n.length,a=null,u=(this.prefixChar||"").length;n=n.replace(this._prefix,""),e=e-u;var p=n.charAt(e);if(this.isNumeralChar(p))return e+u;for(var h=e-1;h>=0;)if(p=n.charAt(h),this.isNumeralChar(p)){a=h+u;break}else h--;if(a!==null)this.inputRef.current.setSelectionRange(a+1,a+1);else{for(h=e;h<o;)if(p=n.charAt(h),this.isNumeralChar(p)){a=h+u;break}else h++;a!==null&&this.inputRef.current.setSelectionRange(a,a)}return a||0}},{key:"onInputClick",value:function(){this.initCursor()}},{key:"isNumeralChar",value:function(e){return e.length===1&&(this._numeral.test(e)||this._decimal.test(e)||this._group.test(e)||this._minusSign.test(e))?(this.resetRegex(),!0):!1}},{key:"resetRegex",value:function(){this._numeral.lastIndex=0,this._decimal.lastIndex=0,this._group.lastIndex=0,this._minusSign.lastIndex=0}},{key:"updateValue",value:function(e,n,o,a){var u=this.inputRef.current.value,p=null;n!=null&&(p=this.parseValue(n),p=this.evaluateEmpty(p),this.updateInput(p,o,a,n),this.handleOnChange(e,u,p))}},{key:"evaluateEmpty",value:function(e){return!e&&!this.props.allowEmpty?this.props.min||0:e}},{key:"handleOnChange",value:function(e,n,o){this.props.onChange&&this.isValueChanged(n,o)&&this.props.onChange({originalEvent:e,value:o})}},{key:"isValueChanged",value:function(e,n){if(n===null&&e!==null)return!0;if(n!=null){var o=typeof e=="string"?this.parseValue(e):e;return n!==o}return!1}},{key:"validateValue",value:function(e){return e==="-"||e==null?null:this.props.min!==null&&e<this.props.min?this.props.min:this.props.max!==null&&e>this.props.max?this.props.max:e}},{key:"updateInput",value:function(e,n,o,a){n=n||"";var u=this.inputRef.current,p=u.value,h=this.formatValue(e),m=p.length;if(h!==a&&(h=this.concatValues(h,a)),m===0){u.value=h,u.setSelectionRange(0,0);var y=this.initCursor(),x=y+n.length;u.setSelectionRange(x,x)}else{var b=u.selectionStart,l=u.selectionEnd;u.value=h;var f=h.length;if(o==="range-insert"){var w=this.parseValue((p||"").slice(0,b)),D=w!==null?w.toString():"",I=D.split("").join("(".concat(this.groupChar,")?")),_=new RegExp(I,"g");_.test(h);var ue=n.split("").join("(".concat(this.groupChar,")?")),$=new RegExp(ue,"g");$.test(h.slice(_.lastIndex)),l=_.lastIndex+$.lastIndex,u.setSelectionRange(l,l)}else if(f===m)o==="insert"||o==="delete-back-single"?u.setSelectionRange(l+1,l+1):o==="delete-single"?u.setSelectionRange(l-1,l-1):(o==="delete-range"||o==="spin")&&u.setSelectionRange(l,l);else if(o==="delete-back-single"){var le=p.charAt(l-1),pe=p.charAt(l),H=m-f,Y=this._group.test(pe);Y&&H===1?l+=1:!Y&&this.isNumeralChar(le)&&(l+=-1*H+1),this._group.lastIndex=0,u.setSelectionRange(l,l)}else if(p==="-"&&o==="insert"){u.setSelectionRange(0,0);var ce=this.initCursor(),q=ce+n.length+1;u.setSelectionRange(q,q)}else l=l+(f-m),u.setSelectionRange(l,l)}u.setAttribute("aria-valuenow",e)}},{key:"updateInputValue",value:function(e){e=this.evaluateEmpty(e);var n=this.inputRef.current,o=n.value,a=this.formattedValue(e);o!==a&&(n.value=a,n.setAttribute("aria-valuenow",e))}},{key:"formattedValue",value:function(e){var n=this.evaluateEmpty(e);return this.formatValue(n)}},{key:"concatValues",value:function(e,n){if(e&&n){var o=n.search(this._decimal);return this._decimal.lastIndex=0,o!==-1?e.split(this._decimal)[0]+n.slice(o):e}return e}},{key:"getDecimalLength",value:function(e){if(e){var n=e.split(this._decimal);if(n.length===2)return n[1].replace(this._suffix,"").trim().replace(/\s/g,"").replace(this._currency,"").length}return 0}},{key:"updateModel",value:function(e,n){this.props.onValueChange&&this.props.onValueChange({originalEvent:e,value:n,stopPropagation:function(){},preventDefault:function(){},target:{name:this.props.name,id:this.props.id,value:n}})}},{key:"onInputFocus",value:function(e){var n=this;e.persist(),this.setState({focused:!0},function(){n.props.onFocus&&n.props.onFocus(e)})}},{key:"onInputBlur",value:function(e){var n=this;e.persist(),this.setState({focused:!1},function(){var o=n.inputRef.current.value;if(n.isValueChanged(o,n.props.value)){var a=n.validateValue(n.parseValue(o));n.updateInputValue(a),n.updateModel(e,a)}n.props.onBlur&&n.props.onBlur(e)})}},{key:"clearTimer",value:function(){this.timer&&clearInterval(this.timer)}},{key:"isStacked",value:function(){return this.props.showButtons&&this.props.buttonLayout==="stacked"}},{key:"isHorizontal",value:function(){return this.props.showButtons&&this.props.buttonLayout==="horizontal"}},{key:"isVertical",value:function(){return this.props.showButtons&&this.props.buttonLayout==="vertical"}},{key:"getInputMode",value:function(){return this.props.inputMode||(this.props.mode==="decimal"&&!this.props.minFractionDigits?"numeric":"decimal")}},{key:"getFormatter",value:function(){return this.numberFormat}},{key:"updateInputRef",value:function(){var e=this.props.inputRef;e&&(typeof e=="function"?e(this.inputRef.current):e.current=this.inputRef.current)}},{key:"componentDidMount",value:function(){this.updateInputRef(),this.props.tooltip&&this.renderTooltip();var e=this.validateValue(this.props.value);this.props.value!==null&&this.props.value!==e&&this.updateModel(null,e)}},{key:"componentDidUpdate",value:function(e){(e.tooltip!==this.props.tooltip||e.tooltipOptions!==this.props.tooltipOptions)&&(this.tooltip?this.tooltip.update(F({content:this.props.tooltip},this.props.tooltipOptions||{})):this.renderTooltip());var n=this.isOptionChanged(e);if(n&&this.constructParser(),e.value!==this.props.value||n){var o=this.validateValue(this.props.value);this.updateInputValue(o),this.props.value!==null&&this.props.value!==o&&this.updateModel(null,o)}}},{key:"isOptionChanged",value:function(e){var n=this,o=["locale","localeMatcher","mode","currency","currencyDisplay","useGrouping","minFractionDigits","maxFractionDigits","suffix","prefix"];return o.some(function(a){return e[a]!==n.props[a]})}},{key:"componentWillUnmount",value:function(){this.tooltip&&(this.tooltip.destroy(),this.tooltip=null)}},{key:"renderTooltip",value:function(){this.tooltip=re({target:this.element,content:this.props.tooltip,options:this.props.tooltipOptions})}},{key:"renderInputElement",value:function(){var e=k("p-inputnumber-input",this.props.inputClassName),n=this.formattedValue(this.props.value);return c(Be,{ref:this.inputRef,id:this.props.inputId,style:this.props.inputStyle,role:"spinbutton",className:e,defaultValue:n,type:this.props.type,size:this.props.size,tabIndex:this.props.tabIndex,inputMode:this.getInputMode(),maxLength:this.props.maxLength,disabled:this.props.disabled,required:this.props.required,pattern:this.props.pattern,placeholder:this.props.placeholder,readOnly:this.props.readOnly,name:this.props.name,autoFocus:this.props.autoFocus,onKeyDown:this.onInputKeyDown,onKeyPress:this.onInputKeyPress,onInput:this.onInput,onClick:this.onInputClick,onBlur:this.onInputBlur,onFocus:this.onInputFocus,onPaste:this.onPaste,min:this.props.min,max:this.props.max,"aria-valuemin":this.props.min,"aria-valuemax":this.props.max,"aria-valuenow":this.props.value,"aria-labelledby":this.props.ariaLabelledBy})}},{key:"renderUpButton",value:function(){var e=k("p-inputnumber-button p-inputnumber-button-up p-button p-button-icon-only p-component",{"p-disabled":this.props.disabled},this.props.incrementButtonClassName),n=k("p-button-icon",this.props.incrementButtonIcon);return g("button",{type:"button",className:e,onMouseLeave:this.onUpButtonMouseLeave,onMouseDown:this.onUpButtonMouseDown,onMouseUp:this.onUpButtonMouseUp,onKeyDown:this.onUpButtonKeyDown,onKeyUp:this.onUpButtonKeyUp,disabled:this.props.disabled,tabIndex:-1,children:[c("span",{className:n}),c(Q,{})]})}},{key:"renderDownButton",value:function(){var e=k("p-inputnumber-button p-inputnumber-button-down p-button p-button-icon-only p-component",{"p-disabled":this.props.disabled},this.props.decrementButtonClassName),n=k("p-button-icon",this.props.decrementButtonIcon);return g("button",{type:"button",className:e,onMouseLeave:this.onDownButtonMouseLeave,onMouseDown:this.onDownButtonMouseDown,onMouseUp:this.onDownButtonMouseUp,onKeyDown:this.onDownButtonKeyDown,onKeyUp:this.onDownButtonKeyUp,disabled:this.props.disabled,tabIndex:-1,children:[c("span",{className:n}),c(Q,{})]})}},{key:"renderButtonGroup",value:function(){var e=this.props.showButtons&&this.renderUpButton(),n=this.props.showButtons&&this.renderDownButton();return this.isStacked()?g("span",{className:"p-inputnumber-button-group",children:[e,n]}):g(be,{children:[e,n]})}},{key:"render",value:function(){var e=this,n=k("p-inputnumber p-component p-inputwrapper",this.props.className,{"p-inputwrapper-filled":this.props.value!=null&&this.props.value.toString().length>0,"p-inputwrapper-focus":this.state.focused,"p-inputnumber-buttons-stacked":this.isStacked(),"p-inputnumber-buttons-horizontal":this.isHorizontal(),"p-inputnumber-buttons-vertical":this.isVertical()}),o=this.renderInputElement(),a=this.renderButtonGroup();return g("span",{ref:function(p){return e.element=p},id:this.props.id,className:n,style:this.props.style,children:[o,a]})}}]),s}(v.exports.Component);oe(B,"defaultProps",{value:null,inputRef:null,format:!0,showButtons:!1,buttonLayout:"stacked",incrementButtonClassName:null,decrementButtonClassName:null,incrementButtonIcon:"pi pi-angle-up",decrementButtonIcon:"pi pi-angle-down",locale:void 0,localeMatcher:void 0,mode:"decimal",suffix:null,prefix:null,currency:void 0,currencyDisplay:void 0,useGrouping:!0,minFractionDigits:void 0,maxFractionDigits:void 0,id:null,name:null,type:"text",allowEmpty:!0,step:1,min:null,max:null,disabled:!1,required:!1,tabIndex:null,pattern:null,inputMode:null,placeholder:null,readOnly:!1,size:null,style:null,className:null,inputId:null,autoFocus:!1,inputStyle:null,inputClassName:null,tooltip:null,tooltipOptions:null,ariaLabelledBy:null,onValueChange:null,onChange:null,onBlur:null,onFocus:null,onKeyDown:null});var Ge=()=>{const r=v.exports.useRef(null),[i,s]=v.exports.useState(""),[t,e]=v.exports.useState(null),n=l=>{t?t.render(l).then(([f,w,D])=>{s(f),a(w),p(D),O().success("Image loaded")}).catch(f=>{O().error(f.toString())}):O().warn("Please wait for canvas to finish initializing")},[o,a]=v.exports.useState(0),[u,p]=v.exports.useState(0),[h,m]=v.exports.useState(1),[y,x]=v.exports.useState(!1),b=l=>{if(!t||!i)O().warn("Select a file first");else switch(l){case"reset":t.reset();const[f,w]=t.getSize();a(f),p(w),m(1),x(!1);break;case"width":t.setWidth(o);break;case"height":t.setHeight(u);break;case"opacity":t.setOpacity(h);break;case"gray":t.setGray(!y),x(!y);break;case"download":t.download();break}};return g("div",{style:{position:"relative",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[g("div",{style:{position:"relative",width:"299px",height:"100%",borderRight:"solid 1px #cccccc"},children:[c("input",{ref:r,type:"file",style:{display:"none"},onChange:()=>{if(r.current.files.length>0){const l=r.current.files[0],[f,...w]=l.name.split(".").reverse();P.allowType.includes(f)?n(l):O().error("Type not allowed: *."+f)}}}),c("div",{style:{position:"relative",width:"100%",height:"30px",fontFamily:"Curlz MT",fontSize:"24px",fontWeight:"bold",letterSpacing:"3px",lineHeight:"30px",textAlign:"center"},children:"Operate"}),g("div",{style:{position:"relative",width:"calc(100% - 40px)",height:"calc(100% - 30px)",margin:"0 20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-evenly"},children:[i!==""?c("img",{style:{position:"relative",width:"calc(100% - 40px)",margin:"0 20px"},src:i,alt:""}):"",c("div",{style:{width:"100%"},onClick:()=>{var l;(l=r.current)==null||l.click()},children:g("span",{className:"p-inputgroup-addon",children:[c("i",{className:"pi pi-upload"}),"\xA0Select (*.jpg, *.png)"]})}),c("div",{style:{width:"100%"},onClick:()=>{b("reset")},children:g("span",{className:"p-inputgroup-addon",children:[c("i",{className:"pi pi-images"}),"\xA0Reset"]})}),g("div",{className:"p-inputgroup",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[c("span",{className:"p-inputgroup-addon",style:{width:"80px"},children:"Width"}),c(B,{value:o,step:10,min:0,allowEmpty:!1,suffix:" px",onChange:l=>{a(l.value)}}),c("span",{className:"p-inputgroup-addon",onClick:()=>{b("width")},children:c("span",{children:c("i",{className:"pi pi-check"})})})]}),g("div",{className:"p-inputgroup",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[c("span",{className:"p-inputgroup-addon",style:{width:"80px"},children:"Height"}),c(B,{value:u,step:10,min:0,allowEmpty:!1,suffix:" px",onChange:l=>{p(l.value)}}),c("span",{className:"p-inputgroup-addon",onClick:()=>{b("height")},children:c("span",{children:c("i",{className:"pi pi-check"})})})]}),g("div",{className:"p-inputgroup",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[c("span",{className:"p-inputgroup-addon",style:{width:"80px"},children:"Opacity"}),c(B,{value:h,min:0,max:1,step:.05,minFractionDigits:2,maxFractionDigits:2,allowEmpty:!1,onChange:l=>{m(l.value)}}),c("span",{className:"p-inputgroup-addon",onClick:()=>{b("opacity")},children:c("span",{children:c("i",{className:"pi pi-check"})})})]}),c("div",{style:{width:"100%"},onClick:()=>{b("gray")},children:g("span",{className:"p-inputgroup-addon",children:[c("i",{className:"pi pi-sync"}),"\xA0",y?"RGB":c("b",{children:"RGB"}),"\xA0",c("i",{className:"pi pi-arrows-h"}),"\xA0",y?c("b",{children:"Gray"}):"Gray"]})}),c("div",{style:{width:"100%"},onClick:()=>{b("download")},children:g("span",{className:"p-inputgroup-addon",children:[c("i",{className:"pi pi-download"}),"\xA0Download (*.png)"]})})]})]}),c("div",{style:{position:"relative",width:"calc(100% - 300px)",height:"100%"},children:c(we,{onInit:l=>{e(l)}})})]})};export{Ge as default};
