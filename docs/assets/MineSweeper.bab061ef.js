var U=(u,t,e)=>{if(!t.has(u))throw TypeError("Cannot "+e)};var i=(u,t,e)=>(U(u,t,"read from private field"),e?e.call(u):t.get(u)),A=(u,t,e)=>{if(t.has(u))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(u):t.set(u,e)},h=(u,t,e,s)=>(U(u,t,"write to private field"),s?s.call(u,e):t.set(u,e),e);import{_ as L,d as P,r as k,a as Y,b as Z,o as d,c as f,e as o,t as B,p as q,g as y,s as R,h as x,w as V,v as T,F as z,f as j,u as b,i as ee,j as H,k as C,n as te,l as G}from"./index.913dcb56.js";var F,v,w,n,p;class se{constructor(t=9,e=9,s){A(this,F,!0);A(this,v,0);A(this,w,0);A(this,n,[]);A(this,p,0);this.init_game(t,e,s)}get mine(){return i(this,p)}init_ground(t=9,e=9,s){t<9?t=9:t>30&&(t=30),e<9?e=9:e>30&&(e=30),h(this,v,t),h(this,w,e),h(this,n,new Array(e).fill(0).map(()=>new Array(t).fill(-5))),s?s<10?h(this,p,10):s>(t-1)*(e-1)?h(this,p,(t-1)*(e-1)):h(this,p,s):t+e<32?h(this,p,Math.floor(.13*t*e)):t+e<46?h(this,p,Math.floor(.19*t*e)):h(this,p,Math.floor(.25*t*e))}init_mine(){let t=i(this,p);const e=new Array(i(this,v)*i(this,w)).fill(0).map((a,l)=>l);let s;for(;t>0;)s=Math.floor(Math.random()*e.length),i(this,n)[Math.floor(e[s]/i(this,v))][e[s]%i(this,v)]=-6,e.splice(s,1),t-=1}init_game(t=9,e=9,s){this.init_ground(t,e,s),this.init_mine(),h(this,F,!0)}count_around(t,e){let s=0;for(let a=Math.max(0,e-1);a<=Math.min(i(this,w)-1,e+1);a++)for(let l=Math.max(0,t-1);l<=Math.min(i(this,v)-1,t+1);l++)(i(this,n)[a][l]===-6||i(this,n)[a][l]===-4||i(this,n)[a][l]===-2)&&(s+=1);return s}dig(t,e){const s=i(this,n)[e][t];if(s===-3||s===-4||s===-1||s===-2)return[!1,"continue"];if(s>=0)return[!1,"continue"];if(s===-6)if(i(this,F)){for(let a=0;a<i(this,w);a++)for(let l=0;l<i(this,v);l++){if(i(this,n)[a][l]===-5)return i(this,n)[e][t]=-5,i(this,n)[a][l]=-6,this.dig(t,e);if(i(this,n)[a][l]===-3)return i(this,n)[e][t]=-5,i(this,n)[a][l]=-4,this.dig(t,e);if(i(this,n)[a][l]===-1)return i(this,n)[e][t]=-5,i(this,n)[a][l]=-2,this.dig(t,e)}return[!1,"never"]}else return[!0,"die"];else{i(this,F)&&h(this,F,!1);let a=this.count_around(t,e);if(i(this,n)[e][t]=a,a===0)for(let l=Math.max(0,e-1);l<=Math.min(i(this,w)-1,e+1);l++)for(let m=Math.max(0,t-1);m<=Math.min(i(this,v)-1,t+1);m++)this.dig(m,l);return this.show_me_safe()[0]===-1?[!0,"win"]:[!1,"continue"]}}mark(t,e){const s=i(this,n)[e][t];s>=0||(s===-6?i(this,n)[e][t]=-4:s===-4?i(this,n)[e][t]=-2:s===-2?i(this,n)[e][t]=-6:s===-5?i(this,n)[e][t]=-3:s===-3?i(this,n)[e][t]=-1:s===-1&&(i(this,n)[e][t]=-5))}show_me_safe(){let t=[-1,-1],e=[-1,-1];for(let s=0;s<i(this,w);s++)for(let a=0;a<i(this,v);a++){if(i(this,n)[s][a]===-5)return[a,s];i(this,n)[s][a]===-1&&t[0]===-1?t=[a,s]:i(this,n)[s][a]===-3&&e[0]===-1&&(e=[a,s])}return t[0]!==-1?t:e[0]!==-1?e:[-1,-1]}have_a_look(){return i(this,n).map(t=>[...t])}}F=new WeakMap,v=new WeakMap,w=new WeakMap,n=new WeakMap,p=new WeakMap;const ie=u=>(q("data-v-3e35d03e"),u=u(),y(),u),ae={class:"timer-box"},ne={class:"min"},le=ie(()=>o("div",{class:"tick"}," : ",-1)),ue={class:"sec"},oe=P({emits:["ready"],setup(u,{emit:t}){const e=k(null),s=k(0),a=k(0),l=()=>{e.value!==null&&clearInterval(e.value),s.value=0,a.value=0,e.value=setInterval(()=>{a.value===59?(a.value=0,s.value=(s.value+1)%60):a.value+=1},1e3)},m=()=>{e.value!==null&&clearInterval(e.value),e.value=null};return Y(()=>{t("ready",{start:l,stop:m})}),Z(()=>{m()}),(D,$)=>(d(),f("div",ae,[o("div",ne,B(s.value<10?"0"+s.value:""+s.value),1),le,o("div",ue,B(a.value<10?"0"+a.value:""+a.value),1)]))}});var re=L(oe,[["__scopeId","data-v-3e35d03e"]]);const I=u=>(q("data-v-1d95471b"),u=u(),y(),u),ce={class:"mine-sweeper"},he={class:"banner-area"},_e={class:"ipt"},de=I(()=>o("span",null,"\u5BBD\u5EA6: ",-1)),fe={class:"ipt"},ve=I(()=>o("span",null,"\u9AD8\u5EA6: ",-1)),pe={class:"ipt"},me=I(()=>o("span",null,"\u96F7\u6570: ",-1)),ge=I(()=>o("i",{class:"iconfont icon-note"},null,-1)),ke=G(" \u63D0\u793A "),we=[ge,ke],Be=I(()=>o("i",{class:"iconfont icon-start"},null,-1)),Fe=G(" \u5F00\u59CB "),Me=[Be,Fe],Ae={class:"ground-area"},be={class:"ground-container"},Ce=["onClick","onContextmenu"],Ie={key:0,class:"mark"},Ee={key:1,class:"mark"},Se={key:2,class:"tip"},De={key:4,class:"label"},$e=P({setup(u){const t=k("wait"),e=new se,s=k(e.have_a_look()),a=k(""),l=k(""),m=k(""),D=R(()=>{}),$=R(()=>{}),J=g=>{D.value=g.start,$.value=g.stop},M=k([-1,-1]),K=()=>{if(t.value!=="start"){b().info("\u8BF7\u70B9\u51FB\u5F00\u59CB\u6309\u94AE");return}M.value=e.show_me_safe()},O=()=>{t.value="start",e.init_game(parseInt(a.value)||9,parseInt(l.value)||9,parseInt(m.value)||0),s.value=e.have_a_look(),D.value(),console.log(s.value)},Q=(g,_)=>{if(t.value!=="start"){b().info("\u8BF7\u70B9\u51FB\u5F00\u59CB\u6309\u94AE");return}M.value[0]===g&&M.value[1]===_&&(M.value=[-1,-1]);const r=e.dig(g,_);r[0]&&($.value(),t.value="end",r[1]==="win"?b().success("you win!"):b().error("you failed!")),s.value=e.have_a_look()},W=(g,_,r)=>{if(t.value!=="start"){b().info("\u8BF7\u70B9\u51FB\u5F00\u59CB\u6309\u94AE");return}r.preventDefault(),e.mark(g,_),s.value=e.have_a_look()},X=g=>{switch(g){case 1:return"#ff0000";case 2:return"#ffa500";case 3:return"#b0b047";case 4:return"#008000";case 5:return"#2da0ff";case 6:return"#0000ff";case 7:return"#800080";case 8:return"#000000"}};return(g,_)=>(d(),f("div",ce,[o("div",he,[x(re,{onReady:J}),o("div",_e,[de,V(o("input",{type:"number","onUpdate:modelValue":_[0]||(_[0]=r=>a.value=r),placeholder:"\u8303\u56F4: 9 - 30"},null,512),[[T,a.value]])]),o("div",fe,[ve,V(o("input",{type:"number","onUpdate:modelValue":_[1]||(_[1]=r=>l.value=r),placeholder:"\u8303\u56F4: 9 - 30"},null,512),[[T,l.value]])]),o("div",pe,[me,V(o("input",{type:"number","onUpdate:modelValue":_[2]||(_[2]=r=>m.value=r),placeholder:"\u6700\u5C0F\u4E3A10\u4E2A"},null,512),[[T,m.value]])]),o("div",{class:"group"},[o("div",{class:"btn",title:"\u63D0\u793A\u4E00\u4E2A\u5B89\u5168\u4F4D\u7F6E",onClick:K},we),o("div",{class:"btn",title:"\u5F00\u59CB",onClick:O},Me)])]),o("div",Ae,[o("div",be,[(d(!0),f(z,null,j(s.value,(r,E)=>(d(),f("div",{class:"row",key:"row-"+E},[(d(!0),f(z,null,j(r,(c,S)=>(d(),f("div",{class:ee(["column",c<0?"uncheck":"checked"]),key:"col-"+S,onClick:H(N=>Q(S,E),["left"]),onContextmenu:H(N=>W(S,E,N),["right"])},[c===-1||c===-2?(d(),f("span",Ie,B("\u2753"))):C("",!0),c===-3||c===-4?(d(),f("span",Ee,B("\u{1F6A9}"))):C("",!0),S===M.value[0]&&E===M.value[1]?(d(),f("span",Se,B("\u{1F447}"))):C("",!0),c>=0?(d(),f("span",{key:3,class:"label",style:te(`color: ${X(c)}`)},B(c>0?c:"\xA0"),5)):C("",!0),t.value==="end"&&(c===-6||c===-4||c===-2)?(d(),f("span",De,B("\u{1F4A3}"))):C("",!0)],42,Ce))),128))]))),128))])])]))}});var Ne=L($e,[["__scopeId","data-v-1d95471b"]]);export{Ne as default};
