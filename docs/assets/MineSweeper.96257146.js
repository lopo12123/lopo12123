var N=(u,t,e)=>{if(!t.has(u))throw TypeError("Cannot "+e)};var a=(u,t,e)=>(N(u,t,"read from private field"),e?e.call(u):t.get(u)),M=(u,t,e)=>{if(t.has(u))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(u):t.set(u,e)},c=(u,t,e,s)=>(N(u,t,"write to private field"),s?s.call(u,e):t.set(u,e),e);import{_ as H,d as L,r as k,a as Y,b as Z,o as d,c as v,e as r,t as F,p as P,g as q,s as U,h as y,w as $,v as V,F as R,f as z,i as x,j,k as A,n as ee,l as G}from"./index.222de00a.js";var C,f,B,n,p;class te{constructor(t=9,e=9,s){M(this,C,!0);M(this,f,0);M(this,B,0);M(this,n,[]);M(this,p,0);this.init_game(t,e,s)}get mine(){return a(this,p)}init_ground(t=9,e=9,s){t<9?t=9:t>30&&(t=30),e<9?e=9:e>30&&(e=30),c(this,f,t),c(this,B,e),c(this,n,new Array(e).fill(0).map(()=>new Array(t).fill(-5))),s?s<10?c(this,p,10):s>(t-1)*(e-1)?c(this,p,(t-1)*(e-1)):c(this,p,s):t+e<32?c(this,p,Math.floor(.13*t*e)):t+e<46?c(this,p,Math.floor(.19*t*e)):c(this,p,Math.floor(.25*t*e))}init_mine(){let t=a(this,p);const e=new Array(a(this,f)*a(this,B)).fill(0).map((i,l)=>l);let s;for(;t>0;)s=Math.floor(Math.random()*e.length),a(this,n)[Math.floor(e[s]/a(this,f))][e[s]%a(this,f)]=-6,e.splice(s,1),t-=1}init_game(t=9,e=9,s){this.init_ground(t,e,s),this.init_mine(),c(this,C,!0)}count_around(t,e){let s=0;for(let i=Math.max(0,e-1);i<=Math.min(a(this,B)-1,e+1);i++)for(let l=Math.max(0,t-1);l<=Math.min(a(this,f)-1,t+1);l++)(a(this,n)[i][l]===-6||a(this,n)[i][l]===-4||a(this,n)[i][l]===-2)&&(s+=1);return s}dig(t,e){const s=a(this,n)[e][t];if(s===-3||s===-4||s===-1||s===-2)return[!1,"continue"];if(s>=0)return[!1,"continue"];if(s===-6)if(a(this,C)){c(this,C,!1);for(let i=0;i<a(this,B);i++)for(let l=0;l<a(this,f);l++){if(a(this,n)[i][l]===-5)return a(this,n)[e][t]=-5,a(this,n)[i][l]=-6,this.dig(t,e);if(a(this,n)[i][l]===-3)return a(this,n)[e][t]=-5,a(this,n)[i][l]=-4,this.dig(t,e);if(a(this,n)[i][l]===-1)return a(this,n)[e][t]=-5,a(this,n)[i][l]=-2,this.dig(t,e)}return[!1,"never"]}else return[!0,"die"];else{let i=this.count_around(t,e);if(a(this,n)[e][t]=i,i===0)for(let l=Math.max(0,e-1);l<=Math.min(a(this,B)-1,e+1);l++)for(let m=Math.max(0,t-1);m<=Math.min(a(this,f)-1,t+1);m++)this.dig(m,l);return this.show_me_safe()[0]===-1?[!0,"win"]:[!1,"continue"]}}mark(t,e){const s=a(this,n)[e][t];s>=0||(s===-6?a(this,n)[e][t]=-4:s===-4?a(this,n)[e][t]=-2:s===-2?a(this,n)[e][t]=-6:s===-5?a(this,n)[e][t]=-3:s===-3?a(this,n)[e][t]=-1:s===-1&&(a(this,n)[e][t]=-5))}show_me_safe(){let t=[-1,-1],e=[-1,-1];for(let s=0;s<a(this,B);s++)for(let i=0;i<a(this,f);i++){if(a(this,n)[s][i]===-5)return[i,s];a(this,n)[s][i]===-1&&t[0]===-1?t=[i,s]:a(this,n)[s][i]===-3&&e[0]===-1&&(e=[i,s])}return t[0]!==-1?t:e[0]!==-1?e:[-1,-1]}have_a_look(){return a(this,n).map(t=>[...t])}}C=new WeakMap,f=new WeakMap,B=new WeakMap,n=new WeakMap,p=new WeakMap;const se=u=>(P("data-v-3e35d03e"),u=u(),q(),u),ae={class:"timer-box"},ie={class:"min"},ne=se(()=>r("div",{class:"tick"}," : ",-1)),le={class:"sec"},ue=L({emits:["ready"],setup(u,{emit:t}){const e=k(null),s=k(0),i=k(0),l=()=>{e.value!==null&&clearInterval(e.value),s.value=0,i.value=0,e.value=setInterval(()=>{i.value===59?(i.value=0,s.value=(s.value+1)%60):i.value+=1},1e3)},m=()=>{e.value!==null&&clearInterval(e.value),e.value=null};return Y(()=>{t("ready",{start:l,stop:m})}),Z(()=>{m()}),(S,E)=>(d(),v("div",ae,[r("div",ie,F(s.value<10?"0"+s.value:""+s.value),1),ne,r("div",le,F(i.value<10?"0"+i.value:""+i.value),1)]))}});var re=H(ue,[["__scopeId","data-v-3e35d03e"]]);const b=u=>(P("data-v-4467932e"),u=u(),q(),u),oe={class:"mine-sweeper"},he={class:"banner-area"},ce={class:"ipt"},_e=b(()=>r("span",null,"\u5BBD\u5EA6: ",-1)),de={class:"ipt"},ve=b(()=>r("span",null,"\u9AD8\u5EA6: ",-1)),fe={class:"ipt"},pe=b(()=>r("span",null,"\u96F7\u6570: ",-1)),me=b(()=>r("i",{class:"iconfont icon-note"},null,-1)),ge=G(" \u63D0\u793A "),ke=[me,ge],Be=b(()=>r("i",{class:"iconfont icon-start"},null,-1)),Fe=G(" \u5F00\u59CB "),we=[Be,Fe],Me={class:"ground-area"},Ce={class:"ground-container"},Ae=["onClick","onContextmenu"],be={key:0,class:"mark"},Ie={key:1,class:"mark"},De={key:2,class:"tip"},Se={key:4,class:"label"},Ee=L({setup(u){const t=k("wait"),e=new te,s=k(e.have_a_look()),i=k(""),l=k(""),m=k(""),S=U(()=>{}),E=U(()=>{}),J=g=>{S.value=g.start,E.value=g.stop},w=k([-1,-1]),K=()=>{if(t.value!=="start"){alert("\u8BF7\u5148\u70B9\u51FB\u5F00\u59CB");return}w.value=e.show_me_safe()},O=()=>{t.value="start",e.init_game(parseInt(i.value)||9,parseInt(l.value)||9,parseInt(m.value)||0),s.value=e.have_a_look(),S.value(),console.log(s.value)},Q=(g,_)=>{if(t.value!=="start"){alert("\u8BF7\u5148\u70B9\u51FB\u5F00\u59CB");return}w.value[0]===g&&w.value[1]===_&&(w.value=[-1,-1]);const o=e.dig(g,_);o[0]&&(E.value(),t.value="end",alert(o[1])),s.value=e.have_a_look()},W=(g,_,o)=>{if(t.value!=="start"){alert("\u8BF7\u5148\u70B9\u51FB\u5F00\u59CB");return}o.preventDefault(),e.mark(g,_),s.value=e.have_a_look()},X=g=>{switch(g){case 1:return"#ff0000";case 2:return"#ffa500";case 3:return"#b0b047";case 4:return"#008000";case 5:return"#2da0ff";case 6:return"#0000ff";case 7:return"#800080";case 8:return"#000000"}};return(g,_)=>(d(),v("div",oe,[r("div",he,[y(re,{onReady:J}),r("div",ce,[_e,$(r("input",{type:"number","onUpdate:modelValue":_[0]||(_[0]=o=>i.value=o),placeholder:"\u8303\u56F4: 9 - 30"},null,512),[[V,i.value]])]),r("div",de,[ve,$(r("input",{type:"number","onUpdate:modelValue":_[1]||(_[1]=o=>l.value=o),placeholder:"\u8303\u56F4: 9 - 30"},null,512),[[V,l.value]])]),r("div",fe,[pe,$(r("input",{type:"number","onUpdate:modelValue":_[2]||(_[2]=o=>m.value=o),placeholder:"\u6700\u5C0F\u4E3A10\u4E2A"},null,512),[[V,m.value]])]),r("div",{class:"group"},[r("div",{class:"btn",title:"\u63D0\u793A\u4E00\u4E2A\u5B89\u5168\u4F4D\u7F6E",onClick:K},ke),r("div",{class:"btn",title:"\u5F00\u59CB",onClick:O},we)])]),r("div",Me,[r("div",Ce,[(d(!0),v(R,null,z(s.value,(o,I)=>(d(),v("div",{class:"row",key:"row-"+I},[(d(!0),v(R,null,z(o,(h,D)=>(d(),v("div",{class:x(["column",h<0?"uncheck":"checked"]),key:"col-"+D,onClick:j(T=>Q(D,I),["left"]),onContextmenu:j(T=>W(D,I,T),["right"])},[h===-1||h===-2?(d(),v("span",be,F("\u2753"))):A("",!0),h===-3||h===-4?(d(),v("span",Ie,F("\u{1F6A9}"))):A("",!0),D===w.value[0]&&I===w.value[1]?(d(),v("span",De,F("\u{1F447}"))):A("",!0),h>=0?(d(),v("span",{key:3,class:"label",style:ee(`color: ${X(h)}`)},F(h>0?h:"\xA0"),5)):A("",!0),t.value==="end"&&(h===-6||h===-4||h===-2)?(d(),v("span",Se,F("\u{1F4A3}"))):A("",!0)],42,Ae))),128))]))),128))])])]))}});var Te=H(Ee,[["__scopeId","data-v-4467932e"]]);export{Te as default};
